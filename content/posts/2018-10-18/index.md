---
path: "/post-four"
cover: "../2018-10-17/finance.jpg"
date: "2018-10-18"
title: "RDS"
tags: ['gatsby', 'other']
published: true
---

モニタリングを有効化すると
CloudWatchの情報が取得できる。

ログ・イベントが必要

Query Editorのエディタでためておくことができる。
パフォーマンスインサイト

lambdaとRDSは相性が悪い
セッションを超えてしまってRDSがうまく動かない状態になる
プロキシを使って、動かすことができる

マルチAZを後から他のアベイラビリティゾーンに作ることができる

セキュリティグループ
インバウンドは/32だけだと、このIPしかアクセスできません。という設定になる。
EC2インスタンスから入れるようにする必要がある
使いたいEC2インスタンスのIPにルールを変更するか、
フルオープンにするか。
/0でフルオープンにできる。



スナップショットから復元できる

DBを指定してアクションをおす
スナップショットから復元できる


DBを指定してアクションをおす
スナップショットから復元できる

ストレージクラス
t2.microを使うと最小

DBインスタンス識別子がある

ネットワーク&セキュリティを設定する

セキュリティグループは作ったものを設定して、
デフォルトは削除する

DBインスタンスの復元をする

コマンドラインでEC2インスタンスに入る

mysql -h エンドポイント -u ユーザー -p 
でログインする


DBを指定してアクションをおす
スナップショットから復元できる

DBがちょっと前の状態で復元される

マルチAZ配置

VPCとサブネットは以前つけているものを使う


teratermなどでアクセスする
DBはエンドポイントにアクセスする
(書き込み、読み込み両方存在する)

select * from account ; 
直近の復元内容が入ってくる
AUto maited backupの機能となる

## RDSのリードレプリカとフェイルオーバー

すでにS3にスナップショットが保存されている
(自動でその設定となっている)

リードレプリカの作成

アクションでリードレプリカの作成ができる
サブネットグループは以前作成したものになる
パブリックアクセスはいいえのママでOK
暗号化は無効で良い
t2.microを使用する

インスタンス識別子
-replicaを入れる
マスターとレプリカができる
再起動をフェイルオーバーを設定することができる

アベイラビリティゾーンで1aにあるが、
実際1cに動くかをみる
再起動時に、フェイルオーバーをしますか？にチェックを入れる

RDSの機能で簡単に使うことができる

RDSからデータベース、削除で削除することができる
削除すると最終スナップショットを作成することができる
delete meで削除ができる




WEBアプリサービスを開発しているC社ではELBを利用して負荷分散を検討しています。アプリの登録ユーザー数は数万人で頻繁に利用されます。正しいELBタイプを選択をしてください。
実際の同時アクセスユーザーはかなり少ないと考えてください。したがって、通常のWEBアプリケーション向けにALBを利用することが正解となります。Aplication Load Balancerは、開放型システム間相互接続 (OSI) モデルの第 7 層であるアプリケーションレイヤーで機能します。

ALBの特徴として間違っているものを選択してください。

こちらが間違った説明内容であり正解となります。HTTP/HTTPSとTCP/SSLプロトコルのL4とL7に対応しているのはCLBの特徴です。Application Load Balancerは、開放型システム間相互接続 (OSI) モデルの第 7 層であるアプリケーションレイヤーで機能します。

NLBの特徴として間違っているものを選択してください 
毎秒数百万のリクエストに対応できる性能があります。

ロードバランシングしたいサーバーとしていくつかの機能別サーバー群を有しています。あなたはソリューションアーキテクトとして機能別にバランシングを実施したいと考えています。選択すべき方式として正しいものはどれですか？
正しい内容です。ALBを利用したパスルーティングを実施することで、機能別にグループ分けしたEC2インスタンス群において、グループ毎にそれぞれバランシングを実施することが可能です。

大規模アクセスが予測されるケースについて、次の「ELBタイプと必要な対応」のセットのうち、「適切ではない内容」を選択してください。
こちらが間違った説明内容であり正解となります。NLBはPre-warming申請は必要ありません


次のうちELBの機能と説明が正しい組合せのものを選択してください。
正しい内容です。スティッキーセッションはセッション中に、同じユーザから来たリクエストを全て、同じEC2インスタンスに送信する機能です。

スケーリングのタイプと説明の組合せで正しいものを選択してください。
スケールダウンはメモリやCPUを削減することです。

既存のEC2インスタンスに対して後からAuto-Scalingを設定する予定です。既存のインスタンスを活かして利用するために、どのターミネーションポリシーを設定するべきでしょうか。
AutoScalingによって新しく設置されたインスタンスから削除される設定です。
NewestInstance

Auto-Scalingグループで設定する内容について間違っているものを選択してください。
AutoScalingによって新しく設置されたインスタンスから削除される設定です。

AZ障害時には、障害が発生していないAZにおいて、その分のインスタンスを起動するように構成することができます。
Auto-Scalingグループにおいて起動台数をAZ間でバランシングすることができます。
こちらが間違った説明内容であり正解となります。インスタンスタイプの選択は起動設定で実施する内容です。

Auto-Scalingの設定において正しいものを選択してください。
ELBのスケーリングはAWS側が対応しており、AutoScalingを設定する必要はありません。
正しい内容です。ELBのターゲットグループを設定すれば、ELB構成を利用してELBのヘルスチェックによりAutoScalingを実行することができます。

Auto-Scalingのターミネーションポリシーのデフォルト設定の動作について正しい内容を選択してください。

OldestLaunchConfigurationからClosestToNextInstanceHourの順番に適用していきます。
正しい内容です。OldestLaunchConfigurationからClosestToNextInstanceHourの順番に適用していきます。

RDSで選択できないDBソフトウェアは次のうちどれでしょうか
間違いです。RDSではDB2は利用できません。Amazon RDS は、メモリ、パフォーマンス、または I/O に最適化されたいくつかのデータベースインスタンスタイプで利用でき、Amazon Aurora、PostgreSQL、MySQL、MariaDB、Oracle データベース、SQL Server など、6 つの使い慣れたデータベースエンジンから選択できます。

C社では現在PostgreSQLを利用してデータベースを構築しているが、AWSクラウドサービスに移行したいと考えている。次に示す既存データベースの要件を踏まえた場合にどのように移行するべきか検討しなさい。

・PostgreSQL10.6を利用

・ファイルシステムとの連携が必要

・CRMとの連携が必要

・WEBサーバーとの連携が必要
正しい内容です。RDSにはファイルシステムとの連携はサポートされていないため、EC2インスタンスを利用してデータベースを構成する必要があります。

RDSのリードレプリカの構築について間違っている内容を選択してください。
こちらが間違った説明内容であり正解となります。リードレプリカは別AZに構築が可能です。

RDSのスナップショットについて間違っている内容を選択してください。
こちらが間違った説明内容であり正解となります。RDSのスナップショットはリージョン内のS3に保存されます。


RDSを利用したスケーリングについて正しい内容を選択してください。
ELBのスケーリングはAWS側が対応しており、AutoScalingを設定する必要はありません。
正しい内容です。ELBのターゲットグループを設定すれば、ELB構成を利用してELBのヘルスチェックによりAutoScalingを実行することができます。

Auto-Scalingのターミネーションポリシーのデフォルト設定の動作について正しい内容を選択してください。

OldestLaunchConfigurationからClosestToNextInstanceHourの順番に適用していきます。

RDSを利用したスケーリングについて正しい内容を選択してください。
正しい内容です。途中でインスタンスタイプを縮小するなど変更することが可能です。

RDSの暗号化対象として間違っている対象を選択してください。
こちらが間違った説明内容であり正解となります。RDSはそもそもオブジェクトは利用していないため、暗号化対象として不適切です。Amazon RDS リソースの暗号化オプションを有効化すると、AES-256 暗号化アルゴリズムにより DB インスタンス、 自動バックアップ、 リードレプリカ 、スナップショット、 ログを暗号化します。

RDSの暗号化方式として利用できないものを選択してください。
誤った回答です。クライアントサイドの暗号化方式はRDSには利用できません。


RDSを利用したフェイルオーバ構成について正しい内容を選択してください。

正しい内容です。フェイルオーバは手動で実施することができます。

RDSを利用するべき判断ポイントとして間違っているものを選択してください。
こちらが間違った説明内容であり正解となります。パッチ当てはAWS側が実施する管理内容です。パッチ当てなどを社内でコントロールする必要がある場合はEC2インスタンスをデータベースとして利用する必要があります。

